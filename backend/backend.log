2025-04-28 06:48:41,503 - modelscope - INFO - PyTorch version 2.3.1 Found.
2025-04-28 06:48:41,503 - modelscope - INFO - Loading ast index from /home/zentek/.cache/modelscope/ast_indexer
2025-04-28 06:48:41,531 - modelscope - INFO - Loading done! Current index file version is 1.15.0, with md5 33f236531fa051a9510420f237f13a88 and a total number of 980 components indexed
2025-04-28 06:48:43,842 - ChatDigitalHumanLib - INFO - 成功加载CosyVoice模块
2025-04-28 06:48:43,877 - Audio2Face3DClient - INFO - 成功导入官方Audio2Face-3D gRPC模块
INFO:     Started server process [665194]
INFO:     Waiting for application startup.
2025-04-28 06:48:43,890 - TalkingAvatarBackend - INFO - 开始加载CosyVoice模型
2025-04-28 06:48:43,890 - ChatDigitalHumanLib - INFO - 加载CosyVoice2模型: /home/zentek/Documents/CosyVoice/pretrained_models/CosyVoice2-0.5B
/home/zentek/anaconda3/envs/cosyvoice2/lib/python3.10/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.
  deprecate("LoRACompatibleLinear", "1.0.0", deprecation_message)
2025-04-28 06:48:45,915 - root - INFO - input frame rate=25
Special tokens have been added in the vocabulary, make sure the associated word embeddings are fine-tuned or trained.
Special tokens have been added in the vocabulary, make sure the associated word embeddings are fine-tuned or trained.
[1;31m2025-04-28 06:48:46.973508389 [E:onnxruntime:Default, provider_bridge_ort.cc:1744 TryGetProviderInfo_CUDA] /onnxruntime_src/onnxruntime/core/session/provider_bridge_ort.cc:1426 onnxruntime::Provider& onnxruntime::ProviderLibrary::Get() [ONNXRuntimeError] : 1 : FAIL : Failed to load library libonnxruntime_providers_cuda.so with error: libcublasLt.so.11: cannot open shared object file: No such file or directory
[m
[0;93m2025-04-28 06:48:46.973548036 [W:onnxruntime:Default, onnxruntime_pybind_state.cc:870 CreateExecutionProviderInstance] Failed to create CUDAExecutionProvider. Please reference https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#requirementsto ensure all dependencies are met.[m
2025-04-28 06:48:49,819 - ChatDigitalHumanLib - INFO - CosyVoice2模型加载成功
2025-04-28 06:48:49,819 - TalkingAvatarBackend - INFO - CosyVoice模型加载成功
2025-04-28 06:48:49,823 - ChatDigitalHumanLib - INFO - 参考音频加载成功
2025-04-28 06:48:49,823 - TalkingAvatarBackend - INFO - 参考音频加载成功
2025-04-28 06:48:49,823 - TalkingAvatarBackend - INFO - 开始初始化Audio2Face客户端
2025-04-28 06:48:49,823 - Audio2Face3DClient - INFO - 初始化Audio2Face-3D客户端，服务器地址：172.16.10.158:52000，最大缓冲区长度：10.0秒
2025-04-28 06:48:49,827 - Audio2Face3DClient - INFO - 成功连接到Audio2Face-3D服务
2025-04-28 06:48:49,828 - TalkingAvatarBackend - INFO - Audio2Face客户端初始化完成
2025-04-28 06:48:49,828 - TalkingAvatarBackend - INFO - 开始初始化Riva ASR客户端
2025-04-28 06:48:49,828 - TalkingAvatarBackend - INFO - Riva ASR客户端初始化成功
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:     ('172.16.1.2', 61010) - "WebSocket /ws/client_ezpq4xmot" [accepted]
2025-04-28 06:48:50,157 - TalkingAvatarBackend - INFO - WebSocket客户端 client_ezpq4xmot 已连接
INFO:     connection open
2025-04-28 06:48:55,891 - TalkingAvatarBackend - INFO - 临时原始音频文件已保存: /home/zentek/Documents/temp/websocket_speech_20250428_064855.webm
2025-04-28 06:48:55,953 - TalkingAvatarBackend - INFO - 音频转换成功: /home/zentek/Documents/temp/websocket_converted_20250428_064855.wav
2025-04-28 06:48:55,996 - TalkingAvatarBackend - INFO - 语音识别结果: 你好， 
2025-04-28 06:48:55,997 - TalkingAvatarBackend - INFO - 自动提交识别文本到AI处理: 你好， 
2025-04-28 06:48:55,997 - TalkingAvatarBackend - INFO - 处理文本到语音请求: 你好， ...
2025-04-28 06:48:55,997 - ChatDigitalHumanLib - INFO - 发送用户输入到AI: 你好， ...
2025-04-28 06:48:58,723 - httpx - INFO - HTTP Request: POST http://124.74.245.75:8091/api/v1/chats_openai/96c016e6047411f094cc0242ac120006/chat/completions "HTTP/1.1 200 OK"
2025-04-28 06:48:58,731 - ChatDigitalHumanLib - INFO - 收到AI响应: 你好！我是一个英伟达产品知识助手，专门解答关于英伟达产品的各种问题。如果你有任何关于英伟达显卡、AI...
2025-04-28 06:48:58,731 - ChatDigitalHumanLib - INFO - 处理短文本直接生成: 你好！我是一个英伟达产品知识助手，专门解答关于英伟达产品的各种问题。如果你有任何关于英伟达显卡、AI...
  0%|          | 0/1 [00:00<?, ?it/s]2025-04-28 06:48:59,389 - root - INFO - synthesis text 你好！我是一个英伟达产品知识助手，专门解答关于英伟达产品的各种问题。如果你有任何关于英伟达显卡、A I技术或其他产品的问题，尽管问我吧！
2025-04-28 06:49:03,800 - root - INFO - yield speech len 12.28, rtf 0.3591780942115411
100%|██████████| 1/1 [00:04<00:00,  4.92s/it]100%|██████████| 1/1 [00:04<00:00,  4.92s/it]
2025-04-28 06:49:03,810 - ChatDigitalHumanLib - INFO - 短文本音频已保存: /home/zentek/Documents/shared/response_audio_20250428_064903.wav
2025-04-28 06:49:03,810 - TalkingAvatarBackend - INFO - 语音合成成功: /home/zentek/Documents/shared/response_audio_20250428_064903.wav
2025-04-28 06:49:03,810 - TalkingAvatarBackend - INFO - 音频文件长度: 12.28秒
2025-04-28 06:49:03,810 - TalkingAvatarBackend - INFO - 音频超过最大长度限制 (10.0秒)，使用分段处理
2025-04-28 06:49:03,810 - Audio2Face3DClient - INFO - 处理长音频文件到Blendshape数据: /home/zentek/Documents/shared/response_audio_20250428_064903.wav -> /home/zentek/Documents/blendshape/blendshape_20250428_064903.csv
2025-04-28 06:49:03,810 - Audio2Face3DClient - INFO - 分割音频文件: /home/zentek/Documents/shared/response_audio_20250428_064903.wav, 最大段长: 10.0秒
2025-04-28 06:49:03,811 - Audio2Face3DClient - INFO - 音频长度: 12.28秒, 采样率: 24000Hz
2025-04-28 06:49:03,811 - Audio2Face3DClient - INFO - 将音频分割为 2 段
2025-04-28 06:49:03,812 - Audio2Face3DClient - INFO - 保存段 1/2 到 /home/zentek/Documents/shared/response_audio_20250428_064903_segment_1.wav
2025-04-28 06:49:03,812 - Audio2Face3DClient - INFO - 保存段 2/2 到 /home/zentek/Documents/shared/response_audio_20250428_064903_segment_2.wav
2025-04-28 06:49:03,812 - Audio2Face3DClient - INFO - 处理段 1/2: /home/zentek/Documents/shared/response_audio_20250428_064903_segment_1.wav
2025-04-28 06:49:03,812 - Audio2Face3DClient - INFO - 处理音频文件: /home/zentek/Documents/shared/response_audio_20250428_064903_segment_1.wav
2025-04-28 06:49:03,813 - Audio2Face3DClient - INFO - 处理音频数据，大小: 480000 字节
2025-04-28 06:49:03,813 - Audio2Face3DClient - INFO - 音频长度: 10.00 秒
2025-04-28 06:49:05,621 - Audio2Face3DClient - INFO - 段 1 处理完成，获取 301 个动画数据帧
2025-04-28 06:49:05,621 - Audio2Face3DClient - INFO - 处理段 2/2: /home/zentek/Documents/shared/response_audio_20250428_064903_segment_2.wav
2025-04-28 06:49:05,622 - Audio2Face3DClient - INFO - 处理音频文件: /home/zentek/Documents/shared/response_audio_20250428_064903_segment_2.wav
2025-04-28 06:49:05,622 - Audio2Face3DClient - INFO - 处理音频数据，大小: 109440 字节
2025-04-28 06:49:05,622 - Audio2Face3DClient - INFO - 音频长度: 2.28 秒
2025-04-28 06:49:06,126 - Audio2Face3DClient - INFO - 段 2 处理完成，获取 69 个动画数据帧
2025-04-28 06:49:06,126 - Audio2Face3DClient - INFO - 所有段处理完成，总共获取 370 个动画数据帧
2025-04-28 06:49:06,132 - Audio2Face3DClient - INFO - 成功提取 370 帧Blendshape数据
2025-04-28 06:49:06,151 - Audio2Face3DClient - INFO - Blendshape数据已保存至: /home/zentek/Documents/blendshape/blendshape_20250428_064903.csv
2025-04-28 06:49:06,152 - TalkingAvatarBackend - INFO - 生成Blendshape数据文件: /home/zentek/Documents/blendshape/blendshape_20250428_064903.csv, 大小: 242011 字节
2025-04-28 06:49:06,152 - TalkingAvatarBackend - INFO - Blendshape数据生成成功: /home/zentek/Documents/blendshape/blendshape_20250428_064903.csv
2025-04-28 06:49:06,277 - TalkingAvatarBackend - INFO - 返回响应，音频URL: /audio/response_audio_20250428_064903.wav, Blendshape数据帧数: 370
INFO:     172.16.1.2:61065 - "GET /audio/response_audio_20250428_064903.wav HTTP/1.1" 206 Partial Content
2025-04-28 06:49:30,078 - TalkingAvatarBackend - INFO - 临时原始音频文件已保存: /home/zentek/Documents/temp/websocket_speech_20250428_064930.webm
2025-04-28 06:49:30,142 - TalkingAvatarBackend - INFO - 音频转换成功: /home/zentek/Documents/temp/websocket_converted_20250428_064930.wav
2025-04-28 06:49:30,225 - TalkingAvatarBackend - INFO - 语音识别结果: 请介绍一下你自己。 
2025-04-28 06:49:30,225 - TalkingAvatarBackend - INFO - 自动提交识别文本到AI处理: 请介绍一下你自己。 
2025-04-28 06:49:30,226 - TalkingAvatarBackend - INFO - 处理文本到语音请求: 请介绍一下你自己。 ...
2025-04-28 06:49:30,226 - ChatDigitalHumanLib - INFO - 发送用户输入到AI: 请介绍一下你自己。 ...
2025-04-28 06:49:33,612 - httpx - INFO - HTTP Request: POST http://124.74.245.75:8091/api/v1/chats_openai/96c016e6047411f094cc0242ac120006/chat/completions "HTTP/1.1 200 OK"
2025-04-28 06:49:33,614 - ChatDigitalHumanLib - INFO - 收到AI响应: 我是一个英伟达产品知识助手，专门为你解答和英伟达产品相关的各种问题。如果你有任何关于英伟达显卡、芯片...
2025-04-28 06:49:33,614 - ChatDigitalHumanLib - INFO - 处理短文本直接生成: 我是一个英伟达产品知识助手，专门为你解答和英伟达产品相关的各种问题。如果你有任何关于英伟达显卡、芯片...
  0%|          | 0/1 [00:00<?, ?it/s]2025-04-28 06:49:34,062 - root - INFO - synthesis text 我是一个英伟达产品知识助手，专门为你解答和英伟达产品相关的各种问题。如果你有任何关于英伟达显卡、芯片、软件或其他产品的问题，都可以随时问我。
2025-04-28 06:49:39,161 - root - INFO - yield speech len 16.2, rtf 0.3147786193423801
100%|██████████| 1/1 [00:05<00:00,  5.49s/it]100%|██████████| 1/1 [00:05<00:00,  5.49s/it]
2025-04-28 06:49:39,175 - ChatDigitalHumanLib - INFO - 短文本音频已保存: /home/zentek/Documents/shared/response_audio_20250428_064939.wav
2025-04-28 06:49:39,175 - TalkingAvatarBackend - INFO - 语音合成成功: /home/zentek/Documents/shared/response_audio_20250428_064939.wav
2025-04-28 06:49:39,176 - TalkingAvatarBackend - INFO - 音频文件长度: 16.20秒
2025-04-28 06:49:39,176 - TalkingAvatarBackend - INFO - 音频超过最大长度限制 (10.0秒)，使用分段处理
2025-04-28 06:49:39,176 - Audio2Face3DClient - INFO - 处理长音频文件到Blendshape数据: /home/zentek/Documents/shared/response_audio_20250428_064939.wav -> /home/zentek/Documents/blendshape/blendshape_20250428_064939.csv
2025-04-28 06:49:39,176 - Audio2Face3DClient - INFO - 分割音频文件: /home/zentek/Documents/shared/response_audio_20250428_064939.wav, 最大段长: 10.0秒
2025-04-28 06:49:39,177 - Audio2Face3DClient - INFO - 音频长度: 16.20秒, 采样率: 24000Hz
2025-04-28 06:49:39,177 - Audio2Face3DClient - INFO - 将音频分割为 2 段
2025-04-28 06:49:39,178 - Audio2Face3DClient - INFO - 保存段 1/2 到 /home/zentek/Documents/shared/response_audio_20250428_064939_segment_1.wav
2025-04-28 06:49:39,179 - Audio2Face3DClient - INFO - 保存段 2/2 到 /home/zentek/Documents/shared/response_audio_20250428_064939_segment_2.wav
2025-04-28 06:49:39,179 - Audio2Face3DClient - INFO - 处理段 1/2: /home/zentek/Documents/shared/response_audio_20250428_064939_segment_1.wav
2025-04-28 06:49:39,179 - Audio2Face3DClient - INFO - 处理音频文件: /home/zentek/Documents/shared/response_audio_20250428_064939_segment_1.wav
2025-04-28 06:49:39,179 - Audio2Face3DClient - INFO - 处理音频数据，大小: 480000 字节
2025-04-28 06:49:39,179 - Audio2Face3DClient - INFO - 音频长度: 10.00 秒
2025-04-28 06:49:40,686 - Audio2Face3DClient - INFO - 段 1 处理完成，获取 301 个动画数据帧
2025-04-28 06:49:40,687 - Audio2Face3DClient - INFO - 处理段 2/2: /home/zentek/Documents/shared/response_audio_20250428_064939_segment_2.wav
2025-04-28 06:49:40,687 - Audio2Face3DClient - INFO - 处理音频文件: /home/zentek/Documents/shared/response_audio_20250428_064939_segment_2.wav
2025-04-28 06:49:40,687 - Audio2Face3DClient - INFO - 处理音频数据，大小: 297600 字节
2025-04-28 06:49:40,687 - Audio2Face3DClient - INFO - 音频长度: 6.20 秒
2025-04-28 06:49:41,592 - Audio2Face3DClient - INFO - 段 2 处理完成，获取 187 个动画数据帧
2025-04-28 06:49:41,592 - Audio2Face3DClient - INFO - 所有段处理完成，总共获取 488 个动画数据帧
2025-04-28 06:49:41,603 - Audio2Face3DClient - INFO - 成功提取 488 帧Blendshape数据
2025-04-28 06:49:41,634 - Audio2Face3DClient - INFO - Blendshape数据已保存至: /home/zentek/Documents/blendshape/blendshape_20250428_064939.csv
2025-04-28 06:49:41,635 - TalkingAvatarBackend - INFO - 生成Blendshape数据文件: /home/zentek/Documents/blendshape/blendshape_20250428_064939.csv, 大小: 316750 字节
2025-04-28 06:49:41,635 - TalkingAvatarBackend - INFO - Blendshape数据生成成功: /home/zentek/Documents/blendshape/blendshape_20250428_064939.csv
2025-04-28 06:49:41,784 - TalkingAvatarBackend - INFO - 返回响应，音频URL: /audio/response_audio_20250428_064939.wav, Blendshape数据帧数: 488
INFO:     172.16.1.2:61214 - "GET /audio/response_audio_20250428_064939.wav HTTP/1.1" 206 Partial Content
2025-04-28 06:50:06,695 - TalkingAvatarBackend - INFO - WebSocket客户端 client_ezpq4xmot 已断开连接
INFO:     connection closed
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [665194]
